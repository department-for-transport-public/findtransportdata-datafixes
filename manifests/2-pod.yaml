apiVersion: v1
kind: Pod
metadata:
  name: postman-runner-BRANCH_NAME
  namespace: dft-nap-dev
spec:
  serviceAccountName: postman-runner-serviceaccount
  containers:
  - name: postman-runner
    image: europe-docker.pkg.dev/dft-rsss-findtransptdata-dev/dft-nap/postmanrunner
    command: ["newman"]
    args: ["run","https://www.postman.com/collections/9e38ea5fae83c9d3b603","-e","/srv/config/env.json","--insecure"]
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi
    volumeMounts:
    - name: postman-config-secret
      mountPath: "/srv/config"
      readOnly: true
  restartPolicy: Never
  volumes:
    - name: postman-config-secret
      csi:
        driver: secrets-store.csi.k8s.io
        readOnly: true
        volumeAttributes:
          secretProviderClass: "gcp-secret-provider"